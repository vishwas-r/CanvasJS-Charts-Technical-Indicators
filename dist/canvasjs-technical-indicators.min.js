(function(){var c=window.CanvasJS||c?window.CanvasJS:null;if(c&&c.Chart){c.Chart.prototype.updateCustomOptions=function(){this.options&&this.options.technicalIndicators&&(this.options.technicalIndicators.sma&&(this.technicalIndicators.sma=this.options.technicalIndicators.sma||{},this.technicalIndicators.sma.enabled=this.options.technicalIndicators.sma.enabled||!1,this.technicalIndicators.sma.linkedDataSeriesIndex=this.options.technicalIndicators.sma.linkedDataSeriesIndex||0,this.technicalIndicators.sma.period=this.options.technicalIndicators.sma.period||5),this.options.technicalIndicators.ema&&(this.technicalIndicators.ema=this.options.technicalIndicators.ema||{},this.technicalIndicators.ema.enabled=this.options.technicalIndicators.ema.enabled||!1,this.technicalIndicators.ema.linkedDataSeriesIndex=this.options.technicalIndicators.ema.linkedDataSeriesIndex||0,this.technicalIndicators.ema.period=this.options.technicalIndicators.ema.period||5))};c.Chart.prototype.addTechnicalIndicators=function(){function h(a,e){var f=[];e=e||5;for(var b=0;b<e;b++)f.push({x:a[b].x,y:null});b=e-1;for(var d=a.length;b<d;b++){for(var m=a.slice(b-e+1,b),n=0,p=0,k=0;k<m.length;k++){var g=m[k].y[3];n+=g;p++}g=n/p;isNaN(g)?f.push({x:a[b].x,y:null}):f.push({x:a[b].x,y:g})}return f}function l(a,e){for(var f=2/(e+1),b=[{x:a[0].x,y:a[0].y.length?a[0].y[3]:a[0].y}],d=1;d<a.length;d++)b.push({x:a[d].x,y:(a[d].y.length?a[d].y[3]:a[d].y)*f+b[d-1].y*(1-f)});return b}this.technicalIndicators={};this.updateCustomOptions();this.options.technicalIndicators&&this.technicalIndicators.sma.enabled&&(this.technicalIndicators.sma.dataPoints=h(this.options.data[this.technicalIndicators.sma.linkedDataSeriesIndex].dataPoints,this.technicalIndicators.sma.period),this.technicalIndicators.sma.added||(this.options.data.push({type:"line",dataPoints:this.technicalIndicators.sma.dataPoints,color:this.technicalIndicators.sma.color||null,showInLegend:this.technicalIndicators.sma.showInLegend||!1,name:this.technicalIndicators.sma.name||""}),this.technicalIndicators.sma.added=!0));this.options.technicalIndicators&&this.technicalIndicators.ema.enabled&&(this.technicalIndicators.ema.dataPoints=l(this.options.data[this.technicalIndicators.ema.linkedDataSeriesIndex].dataPoints,this.technicalIndicators.ema.period),this.technicalIndicators.ema.added||(this.options.data.push({type:"line",dataPoints:this.technicalIndicators.ema.dataPoints,color:this.technicalIndicators.ema.color||null,showInLegend:this.technicalIndicators.ema.showInLegend||!1,name:this.technicalIndicators.ema.name||""}),this.technicalIndicators.ema.added=!0))};var q=c.Chart.prototype.render;c.Chart.prototype.render=function(h){this.addTechnicalIndicators();return q.apply(this,arguments)}}if(c&&c.StockChart){var r=c.StockChart.prototype.render;c.StockChart.prototype.render=function(h){for(var l=r.apply(this,arguments),a=0;a<this.charts.length;a++)this.charts[a].render();return l}}})();