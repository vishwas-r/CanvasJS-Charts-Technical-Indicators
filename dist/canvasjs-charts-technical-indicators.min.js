(function(){var d=window.CanvasJS||d?window.CanvasJS:null;if(d&&d.Chart){d.Chart.prototype.updateCustomOptions=function(){this.options&&this.options.technicalIndicators&&(this.options.technicalIndicators.sma&&(this.technicalIndicators.sma=this.options.technicalIndicators.sma||{},this.technicalIndicators.sma.enabled=this.options.technicalIndicators.sma.enabled||!1,this.technicalIndicators.sma.linkedDataSeriesIndex=this.options.technicalIndicators.sma.linkedDataSeriesIndex||0,this.technicalIndicators.sma.period=this.options.technicalIndicators.sma.period||5),this.options.technicalIndicators.ema&&(this.technicalIndicators.ema=this.options.technicalIndicators.ema||{},this.technicalIndicators.ema.enabled=this.options.technicalIndicators.ema.enabled||!1,this.technicalIndicators.ema.linkedDataSeriesIndex=this.options.technicalIndicators.ema.linkedDataSeriesIndex||0,this.technicalIndicators.ema.period=this.options.technicalIndicators.ema.period||5))};d.Chart.prototype.addTechnicalIndicators=function(){function k(a,e){var f=[];e=e||5;for(var b=0;b<e;b++)f.push({x:a[b].x,y:null});b=e-1;for(var c=a.length;b<c;b++){for(var l=a.slice(b-e+1,b),m=0,n=0,h=0;h<l.length;h++){var g=l[h].y[3];m+=g;n++}g=m/n;isNaN(g)?f.push({x:a[b].x,y:null}):f.push({x:a[b].x,y:g})}return f}function p(a,e){for(var f=2/(e+1),b=[{x:a[0].x,y:a[0].y.length?a[0].y[3]:a[0].y}],c=1;c<a.length;c++)b.push({x:a[c].x,y:(a[c].y.length?a[c].y[3]:a[c].y)*f+b[c-1].y*(1-f)});return b}this.technicalIndicators={};this.updateCustomOptions();this.options.technicalIndicators&&this.technicalIndicators.sma.enabled&&(this.technicalIndicators.sma.dataPoints=k(this.options.data[this.technicalIndicators.sma.linkedDataSeriesIndex].dataPoints,this.technicalIndicators.sma.period),this.options.data.push({type:"line",dataPoints:this.technicalIndicators.sma.dataPoints,color:this.technicalIndicators.sma.color||null,showInLegend:this.technicalIndicators.sma.showInLegend||!1,name:this.technicalIndicators.sma.name||""}));this.options.technicalIndicators&&this.technicalIndicators.ema.enabled&&(this.technicalIndicators.ema.dataPoints=p(this.options.data[this.technicalIndicators.ema.linkedDataSeriesIndex].dataPoints,this.technicalIndicators.ema.period),this.options.data.push({type:"line",dataPoints:this.technicalIndicators.ema.dataPoints,color:this.technicalIndicators.ema.color||null,showInLegend:this.technicalIndicators.ema.showInLegend||!1,name:this.technicalIndicators.ema.name||""}))};var q=d.Chart.prototype.render;d.Chart.prototype.render=function(k){this.addTechnicalIndicators();return q.apply(this,arguments)}}})();